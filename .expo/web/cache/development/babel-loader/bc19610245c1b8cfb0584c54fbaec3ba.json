{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _expoBarcodeScanner = require(\"expo-barcode-scanner\");\n\nvar _reactNative = require(\"react-native\");\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\APIWATSRINUKUL\\\\Desktop\\\\EventLoopAPP\\\\screens\\\\ScannerScreen.js\";\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar ScannerScreen = function ScannerScreen(props) {\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      hasPermission = _useState2[0],\n      setHasPermission = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      scanned = _useState4[0],\n      setScanned = _useState4[1];\n\n  (0, _react.useEffect)(function () {\n    (0, _asyncToGenerator2.default)(function* () {\n      var _yield$BarCodeScanner = yield _expoBarcodeScanner.BarCodeScanner.requestPermissionsAsync(),\n          status = _yield$BarCodeScanner.status;\n\n      setHasPermission(status === 'granted');\n    })();\n  }, []);\n\n  var handleBarCodeScanned = function handleBarCodeScanned(_ref2) {\n    var type = _ref2.type,\n        data = _ref2.data;\n    setScanned(true);\n    setTimeout(function () {\n      props.navigation.navigate('EventDetail', {\n        QRcode: data\n      });\n    }, 500);\n  };\n\n  if (hasPermission === null) {\n    return _react.default.createElement(_reactNative.Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 16\n      }\n    }, \"Requesting for camera permission\");\n  }\n\n  if (hasPermission === false) {\n    return _react.default.createElement(_reactNative.Text, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 16\n      }\n    }, \"No access to camera\");\n  }\n\n  var test = function test() {\n    setTimeout(function () {\n      setScanned(false);\n    }, 3000);\n  };\n\n  return _react.default.createElement(_reactNative.View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: {\n      height: 300,\n      width: '90%',\n      borderRadius: 15,\n      overflow: 'hidden',\n      borderWidth: 3,\n      borderColor: scanned ? 'green' : 'red'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_expoBarcodeScanner.BarCodeScanner, {\n    onBarCodeScanned: scanned ? undefined : handleBarCodeScanned,\n    style: {\n      flex: 1,\n      width: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 17\n    }\n  }), scanned && test()));\n};\n\nvar styles = _reactNative.StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'white',\n    justifyContent: 'center',\n    alignItems: 'center'\n  }\n});\n\nvar _default = ScannerScreen;\nexports.default = _default;","map":{"version":3,"names":["ScannerScreen","props","useState","hasPermission","setHasPermission","scanned","setScanned","useEffect","BarCodeScanner","requestPermissionsAsync","status","handleBarCodeScanned","type","data","setTimeout","navigation","navigate","QRcode","test","styles","container","height","width","borderRadius","overflow","borderWidth","borderColor","undefined","flex","StyleSheet","create","backgroundColor","justifyContent","alignItems"],"sources":["C:/Users/APIWATSRINUKUL/Desktop/EventLoopAPP/screens/ScannerScreen.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport {BarCodeScanner} from \"expo-barcode-scanner\";\r\nimport {Button, Text, View, StyleSheet} from \"react-native\";\r\n\r\nconst ScannerScreen = (props) => {\r\n\r\n    const [hasPermission, setHasPermission] = useState(null);\r\n    const [scanned, setScanned] = useState(false);\r\n\r\n    // useEffect(()=> {\r\n    //     console.log(props)\r\n    // })\r\n    useEffect(() => {\r\n        (async () => {\r\n            const {status} = await BarCodeScanner.requestPermissionsAsync();\r\n            setHasPermission(status === 'granted');\r\n        })();\r\n    }, []);\r\n\r\n    const handleBarCodeScanned = ({type, data}) => {\r\n        setScanned(true);\r\n        setTimeout(() => {\r\n            props.navigation.navigate('EventDetail', {QRcode: data})\r\n        }, 500)\r\n        // alert(`Bar code with type ${type} and data ${data} has been scanned!`);\r\n    };\r\n\r\n    if (hasPermission === null) {\r\n        return <Text>Requesting for camera permission</Text>;\r\n    }\r\n    if (hasPermission === false) {\r\n        return <Text>No access to camera</Text>;\r\n    }\r\n\r\n    const test = () => {\r\n        setTimeout(() => {\r\n            setScanned(false)\r\n        }, 3000)\r\n    }\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <View style={{\r\n                height: 300,\r\n                width: '90%',\r\n                borderRadius: 15,\r\n                overflow: 'hidden',\r\n                borderWidth: 3,\r\n                borderColor: scanned ? 'green' : 'red'\r\n            }}>\r\n                <BarCodeScanner\r\n                    onBarCodeScanned={scanned ? undefined : handleBarCodeScanned}\r\n                    style={{flex: 1, width: '100%'}}\r\n                />\r\n\r\n                {scanned && test()}\r\n            </View>\r\n        </View>\r\n    );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n        flex: 1,\r\n        backgroundColor: 'white',\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n});\r\n\r\nexport default ScannerScreen;"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;AAEA,IAAMA,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAW;EAE7B,gBAA0C,IAAAC,eAAA,EAAS,IAAT,CAA1C;EAAA;EAAA,IAAOC,aAAP;EAAA,IAAsBC,gBAAtB;;EACA,iBAA8B,IAAAF,eAAA,EAAS,KAAT,CAA9B;EAAA;EAAA,IAAOG,OAAP;EAAA,IAAgBC,UAAhB;;EAKA,IAAAC,gBAAA,EAAU,YAAM;IACZ,gCAAC,aAAY;MACT,kCAAuBC,kCAAA,CAAeC,uBAAf,EAAvB;MAAA,IAAOC,MAAP,yBAAOA,MAAP;;MACAN,gBAAgB,CAACM,MAAM,KAAK,SAAZ,CAAhB;IACH,CAHD;EAIH,CALD,EAKG,EALH;;EAOA,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,QAAkB;IAAA,IAAhBC,IAAgB,SAAhBA,IAAgB;IAAA,IAAVC,IAAU,SAAVA,IAAU;IAC3CP,UAAU,CAAC,IAAD,CAAV;IACAQ,UAAU,CAAC,YAAM;MACbb,KAAK,CAACc,UAAN,CAAiBC,QAAjB,CAA0B,aAA1B,EAAyC;QAACC,MAAM,EAAEJ;MAAT,CAAzC;IACH,CAFS,EAEP,GAFO,CAAV;EAIH,CAND;;EAQA,IAAIV,aAAa,KAAK,IAAtB,EAA4B;IACxB,OAAO,6BAAC,iBAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,sCAAP;EACH;;EACD,IAAIA,aAAa,KAAK,KAAtB,EAA6B;IACzB,OAAO,6BAAC,iBAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,yBAAP;EACH;;EAED,IAAMe,IAAI,GAAG,SAAPA,IAAO,GAAM;IACfJ,UAAU,CAAC,YAAM;MACbR,UAAU,CAAC,KAAD,CAAV;IACH,CAFS,EAEP,IAFO,CAAV;EAGH,CAJD;;EAMA,OACI,6BAAC,iBAAD;IAAM,KAAK,EAAEa,MAAM,CAACC,SAApB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACI,6BAAC,iBAAD;IAAM,KAAK,EAAE;MACTC,MAAM,EAAE,GADC;MAETC,KAAK,EAAE,KAFE;MAGTC,YAAY,EAAE,EAHL;MAITC,QAAQ,EAAE,QAJD;MAKTC,WAAW,EAAE,CALJ;MAMTC,WAAW,EAAErB,OAAO,GAAG,OAAH,GAAa;IANxB,CAAb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAQI,6BAAC,kCAAD;IACI,gBAAgB,EAAEA,OAAO,GAAGsB,SAAH,GAAehB,oBAD5C;IAEI,KAAK,EAAE;MAACiB,IAAI,EAAE,CAAP;MAAUN,KAAK,EAAE;IAAjB,CAFX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EARJ,EAaKjB,OAAO,IAAIa,IAAI,EAbpB,CADJ,CADJ;AAmBH,CAvDD;;AAyDA,IAAMC,MAAM,GAAGU,uBAAA,CAAWC,MAAX,CAAkB;EAC7BV,SAAS,EAAE;IACPQ,IAAI,EAAE,CADC;IAEPG,eAAe,EAAE,OAFV;IAGPC,cAAc,EAAE,QAHT;IAIPC,UAAU,EAAE;EAJL;AADkB,CAAlB,CAAf;;eASejC,a"},"metadata":{},"sourceType":"script"}